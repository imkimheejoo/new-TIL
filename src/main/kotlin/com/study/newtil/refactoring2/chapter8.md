## 8장 기능 이동

### 8.1 함수 옮기기

좋은 소프트웨어 설계의 핵심: `모듈화가 얼마나 잘 되어 있느냐` = 모듈성

모듈성: 프로그램의 어딘가를 수정하려 할 때, 해당 기능과 깊이 관련된 작은 일부만 이해해도 가능하게 해주는 능력

모듈성을 높이려면?

- 서로 연관된 요소를 함께 묶기
- 요소 사이의 연결관계를 쉽게 찾고 이해

옮기는 기준

- 어떤 함수가 자신이 속한 모듈의 요소들 보다 다른 모듈의 요소들을 더 많이 참조할 경우 옮겨야 할 대상이다.
- 대상 함수의 현재 컨텍스트와 후보 컨텍스트를 둘러보면 도움이 된다.
    - 대상 함수**를** 호출하는 함수들은 무엇인지
    - 대상 함수**가** 호출하는 함수들은 또 무엇이 있는지
    - 대상 함수가 **사용하는 데이터**는 무엇인지

### 8.2 필드 옮기기

함수에 항상 함께 건네지는 데이터 조각들은 상호 관계가 명확하게 드러나도록 한 레코드에 담는 게 가장 좋다.

한 레코드를 변경하려 할 때 다른 레코드의 필드까지 변경해야만 한다면 필드 위치가 잘못되었다는 신호다.

### 8.4 문장을 호출한 곳으로 옮기기

여러 곳에서 사용하던 기능이 일부 호출자에게는 다르게 동작하도록 바뀌어야 할 때 문장을 호출한 곳으로 옮기는 작업이 필요하다.

- 작은 변경이라면 문장을 호출한 곳으로 옮기는 것으로 충분하지만, 호출자와 호출 대상의 경계를 완전히 다시 그어야 할 때도 있다.
    - 후자의 경우라면 함수 인라인하기부터 적용한 다음, 문장 슬라이드하기와 함수 추출하기로 더 적합한 경계를 설정하면 된다.

### 8.6 문장 슬라이드하기

하나의 데이터 구조를 이용하는 문장들은 다른 데이터를 이용하는 코드 사이에 흩어져 있기보다는 한데 모여 있어야 좋다.

코드 조각을 슬라이드할 때는 두 가지를 확인해야한다.

- 무엇을 슬라이드할 지 (맥락)
    - 요소를 선언하는 곳과 사용하는 곳을 가까이 두기 -> 함수추출 전에 유용하게 쓰인다.
- 슬라이드 할 수 있는지 -> 실행흐름이 달라지는지 확인

### 8.7 반복문 쪼개기

한 가지 값만 계산하는 반복문이라면 그 값만 곧바로 반환할 수 있다.
반면 여러 일을 수행하는 반복문이라면 구조체를 반환하거나 지역 변수를 활용해야한다.

### 8.8 반복문을 파이프라인으로 바꾸기

컬렉션 파이프라인을 이용하면 처리과정을 일련의 연산으로 표현할 수 있다. (ex. filter, map)
논리를 파이프라인으로 표현하면 이해하기 훨씬 쉬워진다.



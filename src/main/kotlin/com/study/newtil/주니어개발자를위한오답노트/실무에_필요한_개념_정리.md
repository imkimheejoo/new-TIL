## 네트워크 용어 정리

### DNS

> 도메인(ex. naver.com)을 실제 서버와 연결시켜주는 서버

- 가령 www.naver.com으로 왔을 경우 xxx.xx.xx ip로 연결시키는 역할
- VIP (Virtual IP)
    - = 대표 아이피
    - www.naver.com -> (202.10.1.1) Virtual IP -> `202.10.10.1` ~ `202.10.10.255` (255개의 서버)
    - DNS에서 www.naver.com마다 255개의 ip를 매핑하는게 비효율적이라 탄생한 개념
    - VIP는 로드밸런싱(= 부하분산) 역할도 한다.

### GSLB (Global Server Load Balancing)

많은 서버가 한 지역에 있으면 지역이슈가 있을 때 전체 셧다운이 일어난다. 이를 막기 위해 이중화 구성을 한다.

```text
www.google.com
DNS서버 (Vip만 쓰는 경우) -> www.google.com: `202.10.1.1`(강릉), `202.10.2.1`(천안) (VIP) 
    -> 1) 강릉:`202.10.10.1`~ `202.10.10.255` 255개 서버
    -> 2) 천안:`202.10.20.1`~ `202.10.20.255` 255개 서버
```

=> DNS는 장애감지를 할 수 없다. (ex. 강릉에서 장애가 나면 차단 X)

```text    
www.google.com 
DNS서버 (GSLB도 쓰는 경우): www.google.com -> g.google.com
    -> GSLB - g.google.com: `202.10.1.1`(강릉), `202.10.2.1`(천안) (VIP) 
        -> 1) 강릉:`202.10.10.1`~ `202.10.10.255` 255개 서버
        -> 2) 천안:`202.10.20.1`~ `202.10.20.255` 255개 서버
```

=> GSLB는 DNS기반의 LB라서 IP가 아닌 도메인을 갖는다. 이걸 DNS에 알려준다. (ex. g.google.com)

- health를 고려해서 서버가 죽으면 그 서버로는 요청이 안간다.

```text
DNS: google.com -> g.google.com
-> GSLB: g.google.com (202.10.10.1, 202.10.10.2, 202.10.20.1, 202.10.20.2)
    -> 강릉: 202.10.10.1, 202.10.10.2
    -> 천안: 202.10.20.1, 202.10.20.2
```

=> 서버가 많지않으면 Vip를 빼고 GSLB만으로도 쓰인다.

### CDN (Content Delivery Network)

> 콘텐츠를 송수신할 때 효율적으로 하기위해 만들어진 네트워크

ex) www.naver.com 에 필요한 로고를 서버에서 받아 올 때 이미지를 CDN 서버에 올려놓고 매번 서버에 요청하지 않고 로고 이미지를 CDN 서버에서 가져온다.

- 이로인해 Disk I/O 를 줄일 수 있다.

### ACL (Access Control List)

> 네트워크 망에 접근을 허가하는 IP 리스트

ex) 사내망 -> 사내망에 붙어있는 서버(ACL 적용O) -> 인터넷 -> 와부망에 붙어있는 서버(ACL 적용O) -> 외부망

- 서버에 ACL이 적용되어 있다.
- ACL에서 일부 ip,port만 통신이 가능하도록 설정함

### Proxy 서버

> 다른 네트워트 망 간에 통신할 때 간접적으로 접속할 수 있게 하는 서버

이 외에도 다른 목적을 통해 프록시를 쓰인다.

ACL 예시에서 `사내망에 붙어있는 서버(ACL 적용O)`, `와부망에 붙어있는 서버(ACL 적용O)` 이런것들이 다 프록시 서버

- 포워드 프록시 (ex.`사내망에 붙어있는 서버(ACL 적용O)`)
    - = 프록시
- 리버스 프록시 (ex.`와부망에 붙어있는 서버(ACL 적용O)`)
    - 받은 요청을 실제 서버중 하나를 선택해서 요청을 전달 (LB역할)

### Web Server vs Web Application Server(WAS)

- Web Server: apache, nginx
- WAS: tomcat, netty, undertow

**NginX**

- html, css 내려주거나 프록시 역할을 많이 한다.
- 포워드, 리워드 다 사용
    - 백엔드에서는 부하분산용으로 많이 사용한다. (리워드)
- 요청에 limit을 걸 수 있다.

### SSL

> HTTP 를 HTTPS로 만들어주는 보안 프로토콜

## 인프라 용어 정리

### 온프레미스

> 자체 전산실 서버에 직접 설치해 운영하여 서비스를 전달하는 방식

### 온디멘드

> 수요가 있을 때 바로 서비스를 전달할 수 있는 방식

### VDI

> 가상화된 데스크탑에 원격으로 붙는 기술

## 운영 용어 정리

### 시스템 확장

관리자 입장

- 장비 늘리는거 : 스케일 아웃
- 징비 스펙 높이는거: 스케일 업

아키텍처 입장

- 인스턴스 수 늘리기
- 기능분할 (MSA 분리)
- 데이터 파티셔닝

### MSA의 장점

- 여신, 수신, 카드 를 각각 분리했을 때 여신에 트래픽이 많을 경우 여신쪽 msa만 인스턴스를 늘리거나 할 수 있다.
- 여신쪽에만 장애가 발생했을 때 수신, 카드쪽 기능은 정상적으로 동작이 가능하다. (장애전파를 줄임)
- 특정 기능만 배포가 가능하게 할 수 있다.

### HA = 고가용성

> 고장없이 얼마나 잘 되는가의 척도

### 이중화

- Active-Stanby
    - 하나는 쓰고 하나는 대기상태
    - 장애가 나면 standby를 사용한다. (failover 용도)
- Active-Active
    - 둘다 쓰는 방식
    - ex) Master-Slave

### Provisioning

> 시스템을 즉시 사용할 수 있도록 준비해 놓는 것

### Webhook

> 이벤트가 발생했을 시 API를 호출하는 Callback API

## 쿠버네티스

### 개요

> 쿠버네티스는 컨테이너화된 워크로드와 서비스를 관리하기 위한 이식성이 있고, 확장가능한 오픈소스 플랫폼이다.

컨테이너를 돌릴 수 있는 환경이 있다면 어떤 환경이든, 자유롭게 배포가 가능하다.

- 컨테이너안에는 OS세팅도 같이 들어있기 때문에 OS가 다른 머신에 배포할 때 개의치 않고 쉽게 배포가 가능하기 때문이다.

컨테이너 오케스트레이션: 컨테이너를 띄우고 응답이 없는 컨테이너는 죽이고 그만큼 다시 띄우고 하는 작업을 도와주는 도구 (ex.쿠버네티스)

## No SQL

빠르게 변화하는 값들은 redis를 사용한다.

- 일일이 rdb에 기록하기엔 write 성능이 못따라올 수 있는 문제가 있다.

통신할 때 데이터유실이 걱정된다면 system queue 를 사용한다. (kafka)

검색엔진이 필요할 때 elasticsearch를 사용한다.

### Key-value db

- ex) redis, memcached
- map 형태
  **redis**
- 싱글 스레드
    - 샤딩과 클러스터 모드 (확장전략)
- keys 사용금지

### Wide column DB

> relation이 없어서 쓰기성능 빠름

- ex) 카산드라
    - consistent hashing (데이터를 어떻게 골고루 분산해서 저장할지에 대한 방식)
    - partition key 가 중요
    - write 성능이 매우 좋음

### Document DB

> json 같은 데이터를 저장하는 디비

- ex) mongo db, elasticsearch

### Message system

데이터를 저장하는게 목적은 아님

- ex) kafka, rabbitMQ
  kafka
- 4요소: topic, kafka, consumer group, consumer
    - topic을 publish 하면 topic의 key값에 따라 특정파티션으로 데이터 이동
    - 하나의 파티션에 하나의 컨슈머만 붙을 수 있음
        - 그룹 다르면 파티션 하나에 여러 컨슈머 붙을 수 있음
    - 파티션 개수는 축소가 불가능

### Rest Api 실수하는 것

- PUT은 멱등성이 보장되고 PATCH는 멱등성이 보장되지 않는다.

### Oauth

> 다른 애플리케이션을 통해 서버의 접근 권한을 부여하는 인증방식 -> 접근 권한을 위임

Authorization server

- 인증 서버
    - 로그인시 로그인 방법 제공 & 로그인 성공여부 확인 & token 관리
- resource server

### 인증 vs 인가

- 인증: Authentication - 401
    - 토큰이 유효한가
- 인가: Authorization - 403
    - 이 토큰으로 리소스 접근 가능한가

### SSO

> Single sign-on

네이버에서 로그인해 놓고 다른 어플리케이션 사용하는데 그 앱도 자동으로 로그인 되어있도록 하는 것

### CORS

> 아무 도메인이나 우리 서비스를 호출하는 것을 막기위한 정책 (브라우저 단에서만 해당됨)
> api에서 지정한 서버만 호출 가능

### 공변성

> 서브타입이 슈퍼타입 대신 사용될 수 있다

### 반공변성

> 슈퍼타입이 서브타입 대신 사용될 수 있다.

### 무공변성

> 슈퍼타입과 서브타입이 아무런 관계도 없다.

## MySQL 사용에 대한 조언 중 메모

- In쿼리에 갯수가 많아지면 풀 스캔을 한다.
    - 쿼리를 메모리에 올리는 것도 메모리 제한이 있기 때문에 주의!
    - 대략 in안에 100개가 넘어가면 쿼리를 쪼개자
